# AI Context for virtual-domains.sh

## Purpose

This is a dev-focused Linux utility script that maps custom domain names to virtual IP addresses on your local machine or LAN. It supports multiple DNS strategies using a plugin model.

## Architecture

* `virtual-domains.sh`: main script, bash-based
* `/etc/virtual-domains.conf`: stores configuration, IPs, and selected plugin
* DNS plugins implement a standard 4-function shell interface
* Optional systemd service re-applies IPs on boot

## Plugin Interface (DNS)

Each plugin must support:

```sh
init                      # Called once during initial setup
teardown                 # Called during --teardown
add <domain> <ip>        # Called on domain add
remove <domain>          # Called on domain removal
```

Plugins can be:

* `/etc/hosts` based (default)
* mDNS via avahi
* DNS server updates (e.g., dnsmasq, MikroTik)

## Development Notes

* Plugins are user-extensible
* Systemd service is opt-in and idempotent
* All plugin paths are expected to be executable
* Future ideas: IP pool management, DHCP integration, automatic reload triggers
